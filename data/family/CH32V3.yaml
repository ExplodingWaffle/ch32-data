- name: PFIC
  address: 0xE000E000
  registers:
    kind: pfic
    version: rv4
    block: PFIC
- name: SYSTICK
  address: 0xE000F000
  registers:
    kind: systick
    version: rv4
    block: SYSTICK
  interrupts:
    - signal: GLOBAL
      interrupt: SYSTICK
- name: FLASH
  address: 0x40022000
  registers:
    kind: flash
    version: v3
    block: FLASH
- name: EXTI
  address: 0x40010400
  registers:
    kind: exti
    version: common
    block: EXTI
  interrupts:
    - signal: EXTI0
      interrupt: EXTI7_0
    - signal: EXTI8
      interrupt: EXTI15_8
    - signal: EXTI16
      interrupt: EXTI25_16

- name: RCC
  address: 0x40021000
  registers:
    kind: rcc
    version: v3
    block: RCC
  pins:
    # 对于CH32V305FBP6和CH32V305GBU6芯片，PA8和PC9引脚在芯片内部短接合封，禁止将两个IO均配 置为输出功能，有功耗要求的注意引脚状态。
    - pin: PA8
      signal: MCO

- name: GPIOA
  address: 0x40010800
  registers:
    kind: gpio
    version: v3
    block: GPIO
  rcc:
    bus_clock: PCLK2
    kernel_clock: PCLK2
    enable:
      register: APB2PCENR
      field: IOPAEN
    reset:
      register: APB2PRSTR
      field: IOPARST
- name: GPIOB
  address: 0x40010C00
  registers:
    kind: gpio
    version: v3
    block: GPIO
  rcc:
    bus_clock: PCLK2
    kernel_clock: PCLK2
    enable:
      register: APB2PCENR
      field: IOPBEN
    reset:
      register: APB2PRSTR
      field: IOPBRST
- name: GPIOC
  address: 0x40011000
  registers:
    kind: gpio
    version: v3
    block: GPIO
  rcc:
    bus_clock: PCLK2
    kernel_clock: PCLK2
    enable:
      register: APB2PCENR
      field: IOPCEN
    reset:
      register: APB2PRSTR
      field: IOPCRST
- name: GPIOD
  address: 0x40011400
  registers:
    kind: gpio
    version: v3
    block: GPIO
  rcc:
    bus_clock: PCLK2
    kernel_clock: PCLK2
    enable:
      register: APB2PCENR
      field: IOPDEN
    reset:
      register: APB2PRSTR
      field: IOPDRST
- name: GPIOE
  address: 0x40011800
  registers:
    kind: gpio
    version: v3
    block: GPIO
  rcc:
    bus_clock: PCLK2
    kernel_clock: PCLK2
    enable:
      register: APB2PCENR
      field: IOPEEN
    reset:
      register: APB2PRSTR
      field: IOPERST
- name: AFIO
  address: 0x40010004
  registers:
    kind: afio
    version: v3
    block: AFIO
  rcc:
    bus_clock: PCLK2
    kernel_clock: PCLK2
    enable:
      register: APB2PCENR
      field: AFIOEN
    reset:
      register: APB2PRSTR
      field: AFIORST

- name: USART1
  address: 0x40013800
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK2
    kernel_clock: USART1
    enable:
      register: APB2PCENR
      field: USART1EN
    reset:
      register: APB2PRSTR
      field: USART1RST
  # NOTE: complex RM, handled manually
  #remap:
  #  register: PCFR1
  #  field: USART1_RM
- name: USART2
  address: 0x40004400
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: USART2
    enable:
      register: APB1PCENR
      field: USART2EN
    reset:
      register: APB1PRSTR
      field: USART2RST
  # FIXME: single bit RM, handled manually
  #remap:
  #  register: PCFR1
  #  field: USART2_RM
- name: USART3
  address: 0x40004800
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: USART3
    enable:
      register: APB1PCENR
      field: USART3EN
    reset:
      register: APB1PRSTR
      field: USART3RST
  remap:
    register: PCFR1
    field: USART3_RM
# The following are actually USART, not USART
- name: USART4
  address: 0x40004C00
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: USART4
    enable:
      register: APB1PCENR
      field: USART4EN
    reset:
      register: APB1PRSTR
      field: USART4RST
  remap:
    register: PCFR2
    field: USART4_RM

- name: USART5
  address: 0x40005000
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: USART5
    enable:
      register: APB1PCENR
      field: USART5EN
    reset:
      register: APB1PRSTR
      field: USART5RST
  remap:
    register: PCFR2
    field: USART5_RM
- name: USART6
  address: 0x40001800
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: PCLK1
    enable:
      register: APB1PCENR
      field: USART6EN
    reset:
      register: APB1PRSTR
      field: USART6RST
  remap:
    register: PCFR2
    field: USART6_RM
- name: USART7
  address: 0x40001C00
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: PCLK1
    enable:
      register: APB1PCENR
      field: USART7EN
    reset:
      register: APB1PRSTR
      field: USART7RST
  remap:
    register: PCFR2
    field: USART7_RM
- name: USART8
  address: 0x40002000
  registers:
    kind: usart
    version: common
    block: USART
  rcc:
    bus_clock: PCLK1
    kernel_clock: PCLK1
    enable:
      register: APB1PCENR
      field: USART8EN
    reset:
      register: APB1PRSTR
      field: USART8RST
  remap:
    register: PCFR2
    field: USART8_RM

- name: ADC1
  address: 0x40012400
  registers:
    kind: adc
    version: v3
    block: ADC
  rcc:
    bus_clock: PCLK2
    kernel_clock: ADC
    enable:
      register: APB2PCENR
      field: ADC1EN
    reset:
      register: APB2PRSTR
      field: ADC1RST
- name: ADC2
  address: 0x40012800
  registers:
    kind: adc
    version: v3
    block: ADC
  rcc:
    bus_clock: PCLK2
    kernel_clock: ADC
    enable:
      register: APB2PCENR
      field: ADC2EN
    reset:
      register: APB2PRSTR
      field: ADC2RST
